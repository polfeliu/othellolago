(function(e){function t(t){for(var o,s,l=t[0],c=t[1],a=t[2],d=0,h=[];d<l.length;d++)s=l[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&h.push(r[s][0]),r[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);u&&u(t);while(h.length)h.shift()();return i.push.apply(i,a||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,l=1;l<n.length;l++){var c=n[l];0!==r[c]&&(o=!1)}o&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},r={app:0},i=[];function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var a=0;a<l.length;a++)t(l[a]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{id:"inspire"}},[n("div",{staticClass:"light-green lighten-3",attrs:{id:"app"}},[e.browserSupported?e._e():n("h2",[e._v("You're browser does not support webRTC please use a modern browser.")]),n("v-container",[n("v-row",{staticClass:"light-green darken-1"},[n("v-col",[n("h2",[e._v(" ID: "+e._s(e.ownId)+" ")]),n("v-btn",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.ownId,expression:"ownId",arg:"copy"}],attrs:{type:"button",color:"secondary"}},[e._v(" Copy!")])],1),n("v-col",[n("v-text-field",{attrs:{label:"peerID",disabled:e.connecting||e.connected},model:{value:e.peerId,callback:function(t){e.peerId=t},expression:"peerId"}})],1),n("v-col",[n("v-btn",{staticClass:"ma-3",attrs:{color:"primary",disabled:e.connected},on:{click:e.connect}},[e._v(" Connect ")]),n("v-btn",{attrs:{color:"error",disabled:!e.connected},on:{click:e.disconnect}},[e._v(" Disconnect ")])],1)],1),n("v-row",{staticClass:"light-green darken-1",attrs:{justify:"center"}},[n("v-alert",{attrs:{border:"right","colored-border":"",type:"error",elevation:"2",transition:"scale-transition","min-width":"300px"},model:{value:e.peeralreadyplaying,callback:function(t){e.peeralreadyplaying=t},expression:"peeralreadyplaying"}},[e._v(" This peer is already playing ")]),n("v-alert",{attrs:{border:"right","colored-border":"",type:"error",elevation:"2",transition:"scale-transition","min-width":"300px"},model:{value:e.peernotfound,callback:function(t){e.peernotfound=t},expression:"peernotfound"}},[e._v(" Peer not found ")]),n("v-alert",{attrs:{border:"right",type:"info",elevation:"2",transition:"scale-transition","min-width":"600px"},model:{value:e.passedTurn,callback:function(t){e.passedTurn=t},expression:"passedTurn"}},[n("h4",[e._v(" Passed turn since no move was possible ")])])],1),n("v-row",{staticClass:"rounded-t-xl mt-10"},[n("Board",{ref:"board",attrs:{active:e.myTurn,myColorWhite:e.myColorWhite},on:{sendMove:e.sendMove,passTurn:e.passTurn}})],1)],1)],1)])},i=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-row",[n("v-col",{staticClass:"grey lighten-3"},[n("h3",[e._v(" Whites: "+e._s(e.whiteCells)+" ")])]),n("v-col",[n("h3",[e._v(" LeftCells: "+e._s(e.leftCells)+" ")])]),n("v-col",{staticClass:"grey darken-4 white--text"},[n("h3",[e._v(" Blacks: "+e._s(e.blackCells)+" ")])])],1),n("v-row",{class:{"grey lighten-3":e.myColorWhite,"grey darken-4":!e.myColorWhite},attrs:{justify:"center"}},[n("v-col",[n("h2",[e.myColorWhite?n("span",[e._v(" You are: Whites ")]):n("span",{staticClass:"white--text"},[e._v(" You are: Blacks ")]),e.active?n("span",[e._v(" Your Turn! ")]):e._e()])])],1),n("v-row",[n("v-container",{staticClass:"grey lighten-10"},e._l(e.cells,(function(t){return n("v-row",{key:t.y,staticClass:"ma-0",attrs:{"no-gutters":"",align:"center",justify:"center"}},e._l(t,(function(t){return n("div",{key:t.x,staticClass:"cell-block",on:{click:function(n){return e.ClickCell(t.x,t.y)}}},[n("div",{staticClass:"cell green darken-3"},[n("vue-flip",{directives:[{name:"show",rawName:"v-show",value:e.cells[t.y][t.x].show,expression:"cells[cell.y][cell.x].show"}],attrs:{height:"80px",width:"80px",horizontal:"",transition:e.cells[t.y][t.x].show?"400ms":"0s"},scopedSlots:e._u([{key:"front",fn:function(){return[n("v-card",{staticClass:"side black rounded-circle",attrs:{elevation:24}})]},proxy:!0},{key:"back",fn:function(){return[n("v-card",{staticClass:"side white rounded-circle",attrs:{elevation:24}})]},proxy:!0}],null,!0),model:{value:e.cells[t.y][t.x].sideWhite,callback:function(n){e.$set(e.cells[t.y][t.x],"sideWhite",n)},expression:"cells[cell.y][cell.x].sideWhite"}})],1)])})),0)})),1)],1)],1)},l=[],c=(n("159b"),n("99af"),n("293f")),a=n.n(c),u={name:"Board",components:{"vue-flip":a.a},props:{active:{type:Boolean,default:!0},myColorWhite:{type:Boolean,default:!1}},data:function(){return{cells:[],whiteCells:0,blackCells:0,lost:!0,won:!1}},computed:{leftCells:function(){return 64-this.whiteCells-this.blackCells}},methods:{CheckPossibleMoves:function(){var e,t;for(t=0;t<8;t++)for(e=0;e<8;e++)if(this.analyzeMove(e,t,this.myColorWhite))return!0;return!1},setCell:function(e,t,n,o){var r=this.cells[t];n&&(o?this.whiteCells++:this.blackCells++,r[e].show&&(o?this.blackCells--:this.whiteCells--)),r[e].show=n,r[e].sideWhite=o,this.$set(this.cells,t,r)},ClickCell:function(e,t){if(this.active){var n=this.analyzeMove(e,t,this.myColorWhite);n&&(this.setCell(e,t,!0,this.myColorWhite),this.sendMove(e,t),this.FlipCells(n,this.myColorWhite))}},FlipCells:function(e,t){e.forEach(function(e,n){setTimeout(function(){this.setCell(e.x,e.y,!0,t)}.bind(this),200*n)}.bind(this))},analyzeMove:function(e,t,n){var o=[{x:1,y:0},{x:1,y:1},{x:0,y:1},{x:-1,y:1},{x:-1,y:0},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1}],r=[];if(this.cells[t][e].show)return!1;for(var i=0;i<o.length;i++)for(var s=0,l=[];;){s++;var c=e+o[i].x*s,a=t+o[i].y*s;if(c<0)break;if(c>7)break;if(a<0)break;if(a>7)break;if(s>50)throw new Error("Error while analyzing move!");var u=this.cells[a][c];if(!u.show)break;if(u.sideWhite==n){r=r.concat(l);break}l.push({x:c,y:a})}return 0!=r.length&&r},sendMove:function(e,t){this.$emit("sendMove",e,t)},receiveMove:function(e,t){var n=this.analyzeMove(e,t,!this.myColorWhite);n&&(this.setCell(e,t,!0,!this.myColorWhite),this.FlipCells(n,!this.myColorWhite),setTimeout(function(){this.CheckPossibleMoves()||this.$emit("passTurn")}.bind(this),200*(n.length+1)))},resetBoard:function(){this.cells.forEach(function(e,t){e.forEach(function(e,t){3==e.x&&3==e.y?this.setCell(e.x,e.y,!0,!0):4==e.x&&3==e.y?this.setCell(e.x,e.y,!0,!1):4==e.x&&4==e.y?this.setCell(e.x,e.y,!0,!0):3==e.x&&4==e.y?this.setCell(e.x,e.y,!0,!1):this.setCell(e.x,e.y,!1,!0)}.bind(this))}.bind(this))}},created:function(){var e,t;for(t=0;t<8;t++)for(this.cells[t]=[],e=0;e<8;e++)this.cells[t].push({x:e,y:t,show:!1,sideWhite:!0})},mounted:function(){this.resetBoard()}},d=u,h=(n("6deb"),n("2877")),f=Object(h["a"])(d,s,l,!1,null,"4ab3166c",null),p=f.exports,v={name:"App",components:{Board:p},data:function(){return{browserSupported:!0,loading:!0,ownId:"loading",peerId:"",msg:"welcome",connected:!1,connecting:!1,connection:null,peeralreadyplaying:!1,peernotfound:!1,myColorWhite:!0,myTurn:!1,passedTurn:!1}},methods:{send:function(e){this.connection.send(JSON.stringify(e))},passTurn:function(e,t){this.myTurn=!1,this.send("passTurn"),this.passedTurn=!0},sendMove:function(e,t){this.myTurn=!1,this.send({move:{x:e,y:t}})},receiveMove:function(e,t){this.$refs.board.receiveMove(e,t),this.myTurn=!0,this.passedTurn=!1},resetUI:function(){this.connection=null,this.connected=!1,this.peerId="",this.$refs.board.resetBoard()},setListeners:function(e){var t=this;e.on("data",(function(e){e=JSON.parse(e),console.log("data",e),"move"in e?t.receiveMove(e.move.x,e.move.y):"passTurn"==e&&(t.myTurn=!0)})),e.on("close",(function(){t.connection.peer==e.peer&&t.resetUI()})),e.on("error",(function(e){console.error(e)})),e.on("open",(function(){t.connected?setTimeout((function(){this.send({error:"I'm already playing"}),e.close()}),500):(t.connected=!0,t.connection=e,t.connecting=!1,t.peerId=e.peer,t.myColorWhite=!1,t.myTurn=!0)}))},connect:function(){var e=this,t=this.$peer.connect(this.peerId,{label:"user",metadata:{name:"userName"},serialization:"json"});this.connecting=!0,t.on("open",(function(){e.connected||(e.connection=t,e.connected=!0,e.connecting=!1,e.setListeners(t))})),setTimeout(function(){this.connecting&&(this.peernotfound=!0,this.connecting=!1)}.bind(this),1500)},disconnect:function(){this.connection.close(),this.resetUI()}},created:function(){var e=this;this.$peer.on("open",(function(t){e.loading=!1,e.ownId=t})),this.$peer.on("connection",(function(t){e.setListeners(t)})),this.$peer.on("close",(function(){console.log("close peer"),e.resetUI()})),this.$peer.on("disconnected",(function(){console.log("dis"),e.resetUI()}))}},y=v,b=(n("034f"),Object(h["a"])(y,r,i,!1,null,null,null)),m=b.exports,C=n("ce5b"),w=n.n(C);n("bf40");o["default"].use(w.a);var g=new w.a({icons:{iconfont:"mdi"}}),x=n("0724"),k=n("a0bc"),_=n.n(k),T=n("4eb5"),W=n.n(T);o["default"].use(g),o["default"].config.productionTip=!1,o["default"].use(x["a"],new _.a({})),W.a.config.autoSetContainer=!0,o["default"].use(W.a),new o["default"]({vuetify:g,render:function(e){return e(m)},created:function(){},destroy:function(){}}).$mount("#app")},"5e11":function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="5e11"},"6deb":function(e,t,n){"use strict";n("993c")},"85ec":function(e,t,n){},"993c":function(e,t,n){}});
//# sourceMappingURL=app.8ef8cee2.js.map